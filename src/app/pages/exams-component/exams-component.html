<!-- books.component.html -->
<div class="books-container">
    <div class="flex justify-content-between align-items-center mb-4">
        <p-button
            severity="primary"
            label="Add Exam record"
            icon="pi pi-plus"
            (onClick)="addExamRecord()">
        </p-button>
    </div>

    <p-table
        [value]="exams"
        showGridlines
        [loading]="isLoading"
        [paginator]="true"
        [rows]="10"
        [totalRecords]="10"
        [lazy]="true"
        (onLazyLoad)="loadExams($event)"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} books"
        [rowsPerPageOptions]="[5, 10, 20, 50]"
        class="p-datatable-striped">

        <ng-template pTemplate="header">
            <tr>
                <th>Name</th>
                <th>Score</th>
                <th>Semester</th>
                <th>Assessment type</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-exam>
            <tr>
                <td><strong>{{ exam.studentName }}</strong></td>
                <td>{{exam.score}}</td>
                <td>{{exam.semester}}</td>
                <td>{{exam.assessmentType}}</td>
            </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5" class="text-center">
                    <div class="p-4">
                        <i class="pi pi-info-circle" style="font-size: 2rem; color: var(--text-color-secondary)"></i>
                        <p class="mt-2 mb-0">No exam records found.</p>
                    </div>
                </td>
            </tr>
        </ng-template>

        <ng-template pTemplate="loadingbody">
            <tr>
                <td colspan="5" class="text-center">
                    <div class="p-4">
                        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
                        <p class="mt-2 mb-0">Loading exams...</p>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>



    <p-dialog header="Exam" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
        <span class="p-text-secondary block mb-8">Add exam record.</span>
        <div class="flex items-center gap-4 mb-4">
            <label for="username" class="font-semibold w-24">AdmNo</label>
            <input pInputText id="admNo" class="flex-auto" autocomplete="off" />
        </div>

        <div class="flex items-center gap-4 mb-8">
            <label for="email" class="font-semibold w-24">Score</label>
            <input pInputText id="score" class="flex-auto" autocomplete="off" />
        </div>

        <div class="flex items-center gap-4 mb-8">
            <label for="email" class="font-semibold w-24">Semester</label>
            <p-select
                appendTo="body"
                [options]="semesters"
                      [(ngModel)]="selectedSemester"
                      optionLabel="name" placeholder="Select a Semester" class="w-full md:w-56" />
        </div>




        <div class="flex justify-end gap-2">
            <p-button label="Cancel" severity="secondary" (click)="visible = false" />
            <p-button label="Save" (click)="visible = false" />
        </div>
    </p-dialog>
</div>

